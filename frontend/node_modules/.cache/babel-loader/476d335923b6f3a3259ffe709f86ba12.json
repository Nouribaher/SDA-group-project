{"ast":null,"code":"import { useState, useEffect } from 'react';\n\nvar arraysEqual = function arraysEqual(a, b) {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n};\n\nvar useDelayed = function useDelayed(value, delay, ignore) {\n  var _useState = useState(function () {\n    return value;\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState(function () {\n    return ignore || [];\n  }),\n      cachedIgnore = _useState2[0],\n      setCachedIgnore = _useState2[1];\n\n  useEffect(function () {\n    if (!Array.isArray(ignore)) {\n      if (Array.isArray(cachedIgnore)) setCachedIgnore([]);\n      return;\n    }\n\n    if (!arraysEqual(ignore, cachedIgnore)) setCachedIgnore(ignore);\n  }, [ignore]);\n  useEffect(function () {\n    if (Array.isArray(cachedIgnore) && cachedIgnore.indexOf(value) != -1) {\n      setState(value);\n      return;\n    }\n\n    var to = setTimeout(function () {\n      setState(value);\n    }, delay);\n    return function () {\n      return clearTimeout(to);\n    };\n  }, [value, delay, cachedIgnore]);\n  return state;\n};\n\nexport default useDelayed;","map":{"version":3,"sources":["../src/index.tsx"],"names":["arraysEqual","a","b","i","useDelayed","state","setState","useState","cachedIgnore","setCachedIgnore","ignore","useEffect","Array","to","setTimeout","clearTimeout"],"mappings":";;AAEA,IAAIA,WAAW,GAAG,SAAdA,WAAc,CAAA,CAAA,EAAA,CAAA,EAAA;AAChB,MAAIC,CAAC,KAAL,CAAA,EAAa,OAAA,IAAA;AACb,MAAIA,CAAC,IAADA,IAAAA,IAAaC,CAAC,IAAlB,IAAA,EAA4B,OAAA,KAAA;AAC5B,MAAID,CAAC,CAADA,MAAAA,KAAaC,CAAC,CAAlB,MAAA,EAA2B,OAAA,KAAA;;AAE3B,OAAK,IAAIC,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGF,CAAC,CAArB,MAAA,EAA8B,EAA9B,CAAA,EAAmC;AACjC,QAAIA,CAAC,CAADA,CAAC,CAADA,KAASC,CAAC,CAAd,CAAc,CAAd,EAAmB,OAAA,KAAA;AACpB;;AAED,SAAA,IAAA;AATF,CAAA;;AAYA,IAAIE,UAAU,GAAG,SAAbA,UAAa,CAAA,KAAA,EAAA,KAAA,EAAA,MAAA,EAAA;kBACSG,QAAQ,CAAC,YAAA;AAAA,WAAA,KAAA;AAAD,GAAA,C;MAA3BF,KAAAA,GAAAA,SAAAA,CAAAA,CAAAA,C;MAAOC,QAAAA,GAAAA,SAAAA,CAAAA,CAAAA,C;;mBAC0BC,QAAQ,CAAC,YAAA;AAAA,WAAMG,MAAM,IAAZ,EAAA;AAAD,GAAA,C;MAAzCF,YAAAA,GAAAA,UAAAA,CAAAA,CAAAA,C;MAAcC,eAAAA,GAAAA,UAAAA,CAAAA,CAAAA,C;;AAEnBE,EAAAA,SAAS,CAAC,YAAA;AACR,QAAI,CAACC,KAAK,CAALA,OAAAA,CAAL,MAAKA,CAAL,EAA4B;AAC1B,UAAIA,KAAK,CAALA,OAAAA,CAAJ,YAAIA,CAAJ,EAAiCH,eAAe,CAAfA,EAAe,CAAfA;AACjC;AACD;;AAED,QAAI,CAACT,WAAW,CAAA,MAAA,EAAhB,YAAgB,CAAhB,EAAwCS,eAAe,CAAfA,MAAe,CAAfA;AANjC,GAAA,EAON,CAPHE,MAOG,CAPM,CAATA;AASAA,EAAAA,SAAS,CAAC,YAAA;AACR,QAAIC,KAAK,CAALA,OAAAA,CAAAA,YAAAA,KAA+BJ,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,KAA+B,CAAlE,CAAA,EAAsE;AACpEF,MAAAA,QAAQ,CAARA,KAAQ,CAARA;AACA;AACD;;AAED,QAAIO,EAAE,GAAGC,UAAU,CAAC,YAAA;AAClBR,MAAAA,QAAQ,CAARA,KAAQ,CAARA;AADiB,KAAA,EAAnB,KAAmB,CAAnB;AAIA,WAAO,YAAA;AAAA,aAAMS,YAAY,CAAlB,EAAkB,CAAlB;AAAP,KAAA;AAVO,GAAA,EAWN,CAAA,KAAA,EAAA,KAAA,EAXHJ,YAWG,CAXM,CAATA;AAaA,SAAA,KAAA;AA1BF,CAAA","sourcesContent":["import { useEffect, useState } from 'react';\n\nlet arraysEqual = (a: any[], b: any[]) => {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n};\n\nlet useDelayed = <T,>(value: T, delay: number, ignore?: any[]) => {\n  let [state, setState] = useState(() => value);\n  let [cachedIgnore, setCachedIgnore] = useState(() => ignore || []);\n\n  useEffect(() => {\n    if (!Array.isArray(ignore)) {\n      if (Array.isArray(cachedIgnore)) setCachedIgnore([]);\n      return;\n    }\n\n    if (!arraysEqual(ignore, cachedIgnore)) setCachedIgnore(ignore);\n  }, [ignore]);\n\n  useEffect(() => {\n    if (Array.isArray(cachedIgnore) && cachedIgnore.indexOf(value) != -1) {\n      setState(value);\n      return;\n    }\n\n    let to = setTimeout(() => {\n      setState(value);\n    }, delay);\n\n    return () => clearTimeout(to);\n  }, [value, delay, cachedIgnore]);\n\n  return state;\n};\n\nexport default useDelayed;\n"]},"metadata":{},"sourceType":"module"}